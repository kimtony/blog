## nest.js框架


### 代码块
```
'@nestjs/core'
'@nestjs/common'
```

### eggjs与nestjs区别
```
egg.js，以MVC为架构的web框架,约定大于编码;
nest.js，以Ioc 控制反转作为核心概念的web框架，对typescript支持友好;
```

### IOC控制反转 
* NestJS通过依赖注入（Dependency Injection，DI）来实现IoC，这使得对象的依赖关系可以被动态地注入，而不是在对象内部手动创建。
* IoC 的思想就是将原本在程序中手动创建对象的控制权，交由框架来管理。
* 控制：指的是对象创建（实例化、管理）的权力
* 反转：控制权交给外部环境（框架、IoC 容器）
### 依赖注入
* 实例化的对象由IOC去处理，不需要自己手动创建，在用的地方直接声明注入


### AOP面向切面编程
* 通过装饰器和中间件实现面向切面编程,如日志、认证等
```
拦截器：用于处理日志记录、性能监控、响应数据的格式化等。
守卫：用于权限和认证的检查。
管道：用于请求数据的转换和验证。
中间件：用于请求和响应的预处理，如日志记录、请求体解析等。
```



### 生命周期
#### 应用启动:
* 1、onModuleInit()
```
当你的模块通过 modules 数组注册在 Nest 应用程序中时，内部所有的 providers（包括你的服务、守卫、拦截器等）初始化后会调用此方法。
```
* 2、onApplicationBootstrap()
```
此阶段表示所有的东西（模块、providers 以及路由加载器等）都已经被完全初始化
```
#### 应用关闭:
onModuleDestroy() | BeforeApplicationShutdown | onApplicationShutdown()



### nest.js框架使用了哪些设计模式

* 模块化设计模式：
```
Nest.js 使用模块化的设计模式来组织应用程序，将功能按领域划分为不同的模块，每个模块都有自己的控制器、服务、提供者等组件，便于代码组织和管理。
```
* 依赖注入（DI）模式：
```
Nest.js 使用依赖注入模式来管理组件之间的依赖关系，通过将依赖对象注入到组件中，实现了组件的解耦和可测试性，使得代码更加灵活和可维护。
```
* 面向切面编程（AOP）模式：
```
Nest.js 支持面向切面编程模式，通过中间件（Middleware）和守卫（Guards）等机制来实现对请求的拦截和处理，例如身份验证、日志记录、异常处理等。
```
* 服务提供者模式：
```
Nest.js 使用服务提供者模式来封装应用程序中的各种功能和逻辑，通过服务提供者来实现代码的复用和解耦，提高了代码的可维护性和可测试性。
```
* 观察者模式：
```
Nest.js 中的事件系统和自定义事件触发器（EventEmitter）采用了观察者模式，可以订阅和响应应用程序中发生的各种事件，实现了组件之间的解耦和消息通信。
```
* 工厂模式：
```
在 Nest.js 中，可以使用工厂模式来动态创建和管理对象实例，例如使用工厂模式来创建数据库连接、服务实例等。
```
* 装饰器模式：
```
Nest.js 使用装饰器模式来实现元数据的声明和应用，例如 @Module、@Controller、@Injectable 等装饰器用于声明和配置模块、控制器、服务等组件。
```
* 责任链模式：
```
Nest.js 中的中间件和守卫链采用了责任链模式，可以按照特定的顺序依次处理请求，实现了请求的拦截和处理，例如身份验证、权限验证等。
```
